<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Watch Party</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        input, button { padding: 10px; margin: 5px; }
        iframe { width: 80%; height: 500px; border: none; }
    </style>
</head>
<body>
    <h1>Watch Movie Together</h1>

    <input type="text" id="tmdbId" placeholder="Enter TMDB Movie ID">
    <button onclick="fetchMovie()">Load Movie</button>

    <br><br>

    <!-- Video Embed Container -->
    <div id="videoContainer"></div>  <!-- This is where the iframe will be inserted -->

    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Firebase configuration
            const firebaseConfig = {
                apiKey: "AIzaSyBWNDZLIqkLSQUdswT-2H-jr-0Dg2gvuik",
                authDomain: "private-watch-party.firebaseapp.com",
                projectId: "private-watch-party",
                storageBucket: "private-watch-party.firebasestorage.app",
                messagingSenderId: "36283139121",
                appId: "1:36283139121:web:cff1ed864b7349061c0110",
                databaseURL: "https://private-watch-party-default-rtdb.asia-southeast1.firebasedatabase.app"
            };

            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            const db = firebase.database();
            let videoTimeRef = db.ref("videoTime");

            // Fetch movie from the backend server
            function fetchMovie() {
                const tmdbId = document.getElementById("tmdbId").value;
                if (!tmdbId) {
                    alert("Please enter a TMDB ID.");
                    return;
                }

                const apiUrl = `https://jubilant-eureka-pjgw95qgw5xqcrxq9-3000.app.github.dev/movie/${tmdbId}`;

                fetch(apiUrl)
                    .then(response => response.text())
                    .then(data => {
                        const videoContainer = document.getElementById("videoContainer");
                        if (videoContainer) {
                            videoContainer.innerHTML = data;  // Set the iframe embed HTML inside videoContainer
                        } else {
                            console.error("videoContainer not found!");
                        }
                    })
                    .catch(error => console.error("Error fetching movie:", error));
            }
        });
    </script>
</body>
</html>
