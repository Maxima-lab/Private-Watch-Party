<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Watch Party</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        input, button { padding: 10px; margin: 5px; }
        #videoContainer { margin-top: 20px; }
    </style>
    <link href="https://vjs.zencdn.net/7.15.4/video-js.css" rel="stylesheet">
    <script src="https://vjs.zencdn.net/7.15.4/video.js"></script>
</head>
<body>
    <h1>Watch Movie Together</h1>

    <input type="text" id="imdbId" placeholder="Enter IMDb Movie ID">
    <button onclick="fetchMovie()">Load Movie</button>

    <br><br>

    <!-- Video Embed Container -->
    <div id="videoContainer"></div>  <!-- This is where the video player will be inserted -->

    <script>
        // Function to fetch the movie stream based on IMDb ID
        function fetchMovie() {
            const imdbId = document.getElementById("imdbId").value;
            if (!imdbId) {
                alert("Please enter an IMDb ID.");
                return;
            }

            // Hardcoded mapping of IMDb IDs to stream URLs (Guru HLS in this case)
            let streamUrl = '';

            if (imdbId === 'tt0111161') {  // IMDb ID for Shawshank Redemption
                streamUrl = 'https://guru-hls-stream.m3u8';  // Replace with actual Guru HLS URL
            } else {
                alert("Movie not found!");
                return;
            }

            // Create the video player dynamically
            const videoContainer = document.getElementById("videoContainer");
            videoContainer.innerHTML = '';  // Clear previous video

            const videoElement = document.createElement("video");
            videoElement.id = "moviePlayer";
            videoElement.className = "video-js vjs-default-skin";
            videoElement.controls = true;

            const source = document.createElement("source");
            source.src = streamUrl;
            source.type = 'application/x-mpegURL';
            videoElement.appendChild(source);

            videoContainer.appendChild(videoElement);

            // Initialize the Video.js player
            const player = videojs('moviePlayer');
            player.play();
        }
    </script>
</body>
</html>
